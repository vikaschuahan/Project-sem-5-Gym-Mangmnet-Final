{% extends 'navigation.html' %}

{% block body %}
<div class="main-content">
    <div class="container mt-5 mb-5">
        <div class="card shadow-lg border-0" style="border-radius: 15px; overflow: hidden;">
            <div style="background: linear-gradient(to right, #6a11cb, #2575fc); padding: 15px;">
                <h3 class="text-center text-white font-weight-bold">FitZone Gym - View Equipment</h3>
            </div>

            <div class="p-3 bg-light">
                <div class="row align-items-center">
                    <div class="col-md-9">
                        <input type="text" id="searchInput" class="form-control" placeholder="Search equipment by name or category" onkeyup="searchTable()">
                    </div>
                    <div class="col-md-3 text-right mt-2 mt-md-0">
                        <a href="" class="btn btn-primary btn-block" style="background: #6a11cb; border: none;">
                            <i class="fa fa-refresh"></i> Refresh
                        </a>
                    </div>
                </div>
            </div>

            <div class="table-responsive">
                <table class="table table-hover custom-table mb-0">
                    <thead class="table-header">
                        <!-- header background set via CSS below -->
                        <tr>
                            <th>#</th>
                            <th>Equipment Name</th>
                            <th>Category</th>
                            <th>Quantity</th>
                            <th>Purchase Date</th>
                            <th>Condition</th>
                            <th>Notes</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="equipmentTable">
                        {% for i in equ %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ i.name }}</td>
                            <td>{{ i.category }}</td>
                            <td>{{ i.quantity }}</td>
                            <td>{{ i.date|date:"M. j, Y" }}</td>
                            <td>
                                {% if i.condition == "new" %}
                                    <span class="badge badge-success">New</span>
                                {% else %}
                                    <span class="badge badge-secondary">{{ i.condition }}</span>
                                {% endif %}
                            </td>
                            <td>{{ i.description }}</td>
                            <td>
                                <a class="btn btn-warning btn-sm me-1" href="{% url 'edit_equipment' i.id %}">Edit</a>
                                <a class="btn btn-danger btn-sm" href="{% url 'delete_equipment' i.id %}" onclick="return confirm('Are You Sure?')">
                                    Delete
                                </a>
                            </td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="8" class="text-muted">No equipment found.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<script>
    function searchTable() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("searchInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("equipmentTable");
        tr = table.getElementsByTagName("tr");
        for (i = 0; i < tr.length; i++) {
            let nameTd = tr[i].getElementsByTagName("td")[1];
            let categoryTd = tr[i].getElementsByTagName("td")[2];
            if (nameTd || categoryTd) {
                let nameTxt = nameTd.textContent || nameTd.innerText;
                let categoryTxt = categoryTd.textContent || categoryTd.innerText;
                if (nameTxt.toUpperCase().indexOf(filter) > -1 || categoryTxt.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }
</script>
{% endblock %}


{% block css %}
<style>
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: blue;
        /* Establishes the main page layout */
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }

    .main-content {
        flex: 1; /* This is key: it makes the main content grow to fill all available space */
    }

    .footer {
        flex-shrink: 0; /* Prevents the footer from shrinking */
        background-color: #212529; /* Gives footer a solid background */
    }

    /* Your badge styles */
    .badge { padding: 5px 10px; border-radius: 15px; color: white; }
    .badge-success { background: #28a745; }
    .badge-secondary { background: #6c757d; }

    /* Custom table header styles to match the screenshots */
    .custom-table { border-collapse: separate; border-spacing: 0; }
    .custom-table thead .table-header { background: linear-gradient(to right, #6a11cb, #2575fc); color: #fff; }
    .custom-table thead th {
        text-align: left;
        padding: 14px 18px;
        font-weight: 700;
        vertical-align: middle;
        border: 0;
    }
    .custom-table thead th:first-child { width: 60px; text-align: center; }
    .custom-table thead th:last-child { width: 150px; text-align: center; }
    .custom-table tbody td { padding: 14px 18px; vertical-align: middle; }
    .custom-table thead th { border-top-left-radius: 8px; border-top-right-radius: 8px; }
</style>
{% endblock %}

{% block footer %}
<footer id="footer" class="footer">
    <div class="container">
        <div class="row justify-content-center">
            <ul class="social-icons">
                <li><a href="https://www.facebook.com/"><i class="fa fa-facebook"></i></a></li>
                <li><a href="https://x.com/"><i class="fa fa-twitter"></i></a></li>
                <li><a href="https://www.linkedin.com/login"><i class="fa fa-linkedin"></i></a></li>
                <li><a href="https://www.youtube.com/"><i class="fa fa-youtube"></i></a></li>
                <li><a href="https://github.com/login"><i class="fa fa-github"></i></a></li>
            </ul>
        </div>
    </div>
</footer>
{% endblock %}